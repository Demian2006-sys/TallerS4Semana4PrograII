class AppStore {
    // Datos de los juegos
    private String[] nombres = {"PuzzleMania", "ShooterMax", "SoccerStars", "BrainBlocks"};
    private String[] categorias = {"rompecabezas", "acción", "deporte", "rompecabezas"};
    private int[] tamanios = {500, 1200, 950, 700};
    private double[] precios = {2000, 3500, 4000, 2500};
    private int[] licenciasDisponibles = {30, 20, 25, 40};
    private int[] licenciasVendidas = {50, 80, 100, 60};

    // Muestra información de todos los juegos
    public void mostrarJuegos() {
        System.out.println("\n=== INFORMACIÓN DE JUEGOS ===");
        for (int i = 0; i < nombres.length; i++) {
            System.out.println("Juego: " + nombres[i]);
            System.out.println("Categoría: " + categorias[i]);
            System.out.println("Tamaño (KB): " + tamanios[i]);
            System.out.println("Precio: $" + precios[i]);
            System.out.println("Licencias disponibles: " + licenciasDisponibles[i]);
            System.out.println("Licencias vendidas: " + licenciasVendidas[i]);
            System.out.println("------------------------------");
        }
    }

    // Comprar licencias (empresa compra stock)
    public void comprarLicencias(String nombre, int cantidad) {
        int idx = buscarJuego(nombre);
        if (idx != -1) {
            licenciasDisponibles[idx] += cantidad;
            System.out.println("Se compraron " + cantidad + " licencias de " + nombre);
        } else {
            System.out.println("Juego no encontrado.");
        }
    }

    // Vender licencias (cliente compra)
    public void venderLicencias(String nombre, int cantidad) {
        int idx = buscarJuego(nombre);
        if (idx != -1) {
            if (licenciasDisponibles[idx] >= cantidad) {
                double total = precios[idx] * cantidad;
                double descuento = calcularDescuento(categorias[idx], cantidad);
                total -= total * descuento;

                licenciasDisponibles[idx] -= cantidad;
                licenciasVendidas[idx] += cantidad;

                System.out.println("Venta realizada de " + cantidad + " licencias de " + nombre);
                System.out.println("Descuento aplicado: " + (descuento * 100) + "%");
                System.out.println("Total a pagar: $" + total);
            } else {
                System.out.println("No hay suficientes licencias disponibles.");
            }
        } else {
            System.out.println("Juego no encontrado.");
        }
    }

    // Juego más vendido
    public void juegoMasVendido() {
        int max = licenciasVendidas[0];
        int idx = 0;
        for (int i = 1; i < licenciasVendidas.length; i++) {
            if (licenciasVendidas[i] > max) {
                max = licenciasVendidas[i];
                idx = i;
            }
        }
        System.out.println("El juego más vendido es: " + nombres[idx]);
    }

    // Buscar índice de un juego
    private int buscarJuego(String nombre) {
        for (int i = 0; i < nombres.length; i++) {
            if (nombres[i].equalsIgnoreCase(nombre)) return i;
        }
        return -1;
    }

    // Descuentos por volumen de compra
    private double calcularDescuento(String categoria, int cantidad) {
        if (categoria.equalsIgnoreCase("rompecabezas") && cantidad >= 25) {
            return 0.20; // 20% de descuento
        } else if (categoria.equalsIgnoreCase("deporte") && cantidad >= 20) {
            for (String cat : categorias) {
                if (cat.equalsIgnoreCase("acción")) {
                    return 0.15; // 15% de descuento
                }
            }
        }
        return 0.0;
    }

    // Juego menos vendido
    public String darJuegoMenosVendido() {
        int min = licenciasVendidas[0];
        String nombre = nombres[0];
        boolean iguales = true;

        for (int i = 1; i < licenciasVendidas.length; i++) {
            if (licenciasVendidas[i] != min) iguales = false;
            if (licenciasVendidas[i] < min) {
                min = licenciasVendidas[i];
                nombre = nombres[i];
            }
        }
        return iguales ? "NINGUNO" : nombre;
    }

    // Juegos que deben comprarse por porcentaje (25% del menos vendido)
    public String darComprasPorPorcentaje() {
        String menosVendido = darJuegoMenosVendido();
        if (menosVendido.equals("NINGUNO")) return "NINGUNO";
        int idx = buscarJuego(menosVendido);
        int limite = (int) (licenciasVendidas[idx] * 0.25);
        String juegos = "";

        for (int i = 0; i < nombres.length; i++) {
            if (licenciasDisponibles[i] < limite) {
                juegos += nombres[i] + " ";
            }
        }
        return juegos.equals("") ? "NINGUNO" : juegos;
    }

    // Política de categoría
    public boolean seDebeComprarPorCategoria(String nombre) {
        int idx = buscarJuego(nombre);
        if (idx == -1) return false;

        String cat = categorias[idx];
        if ((cat.equalsIgnoreCase("deporte") || cat.equalsIgnoreCase("aventura")) && licenciasDisponibles[idx] < 10)
            return true;
        if ((cat.equalsIgnoreCase("acción") || cat.equalsIgnoreCase("velocidad")) && licenciasDisponibles[idx] < 15)
            return true;
        return false;
    }
}
